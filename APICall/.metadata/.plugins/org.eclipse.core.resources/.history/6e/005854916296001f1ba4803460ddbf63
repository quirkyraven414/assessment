package com.weatherControl.limiter;

import java.util.concurrent.BlockingQueue;

import com.weatherControl.request.WeatherRequest;

public class LeakyBucket {
	
	private final int maxCallsPerMinute;
    private final BlockingQueue<WeatherRequest> queue;
    private int callsMade = 0;
    
    public LeakyBucket(int maxCallsPerMinute) {
        this.maxCallsPerMinute = maxCallsPerMinute;
        this.queue = new ArrayBlockingQueue<>(100); // Adjust the size as needed

        ScheduledExecutorService scheduler = Executors.newScheduledThreadPool(1);
        scheduler.scheduleAtFixedRate(this::drainBucket, 0, 4, TimeUnit.SECONDS); // 60 / 15 = 4 seconds
    }

}
